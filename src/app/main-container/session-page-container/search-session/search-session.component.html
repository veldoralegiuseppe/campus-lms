<div class="session-container">
    <div *ngIf="isAuthenticated && authInfo?.payload?.role?.toString() == 'STUDENTE'" class="title">Cerca sessioni</div>
    <div *ngIf="isAuthenticated && authInfo?.payload?.role?.toString() == 'DOCENTE'" class="title">Cerca sessioni</div>
    <div *ngIf="isAuthenticated && authInfo?.payload?.role?.toString() == 'ADMIN'" class="title">Cerca sessioni</div>
    

    <div class="course-form">
        <div class="form-title">Dati corso</div>
        <div class="form" [formGroup] = "courseFilter">
            <!-- <div [ngStyle]="{'margin-right':'3rem'}" class="app-select-bar" [options]="['Corso']" formControlName="corso"></div>
            <div class="app-select-bar" [options]="['Tipo', 'Orale', 'Scritto']" formControlName="sessione"></div> -->
            <!-- <app-datepicker class="date" [placeholder]="'Da'" formControlName="dataDa"></app-datepicker>
            <app-datepicker class="date" [placeholder]="'A'" formControlName="dataA"></app-datepicker> -->
            <mat-form-field class="form-input-field" appearance="outline">
                <mat-label class="form-input-label">Corsi disponibili</mat-label>
                <mat-select class="custom-theme" formControlName="nomeCorso">
                    @for (corso of corsi; track corso) {
                    <mat-option class='not-empty-select' [value]="corso.value">{{corso.viewValue}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>
            <mat-form-field class="form-input-field" appearance="outline">
                <mat-label class="form-input-label">Tipo</mat-label>
                <mat-select class="custom-theme" formControlName="tipo">
                    <mat-option class='not-empty-select' value="tutti">Tutti</mat-option>
                    <mat-option class='not-empty-select' value="scritto">Scritto</mat-option>
                    <mat-option class='not-empty-select' value="orale">Orale</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field class="form-input-field" appearance="outline">
                <mat-label class="form-input-label">Data da</mat-label>
                <input matInput [min]="minDate" type="date-local" formControlName="dataDa" [matDatepicker]="pickerDa">
                <mat-datepicker-toggle matIconSuffix [for]="pickerDa"></mat-datepicker-toggle>
                <mat-datepicker #pickerDa></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="form-input-field" appearance="outline">
                <mat-label class="form-input-label">Data a</mat-label>
                <input matInput type="date-local" formControlName="dataA" [matDatepicker]="pickerA">
                <mat-datepicker-toggle matIconSuffix [for]="pickerA"></mat-datepicker-toggle>
                <mat-datepicker #pickerA></mat-datepicker>
            </mat-form-field>
        </div>
    </div>

    <div class="control-button-container">
        <app-reset-filter-button [onClick]="resetFilter" [label]="'Azzera filtri'" class="reset-button-container"></app-reset-filter-button>
        <app-search-button [onClick]="submitForms" [label]="'Cerca'" class="search-button-container"></app-search-button>
    </div>

    <div class="app-table-v2 table" 
         [@openClose] = "hideTable ? 'close' : 'open'"
         [columnsTemplate]="authInfo?.payload?.role?.toString() == 'STUDENTE' ? ['selector','.5fr','corso','1fr','tipo','1fr','data','1fr','docente','1fr','studenti','1fr'] : ['corso','1fr','tipo','1fr','data','1fr','docente','1fr','studenti','1fr']" 
         [modelTableMapper]="sessionTableMapper"
         [rowType]="rowType"
         [onEvent]="onSelectedRow"> 
    </div>

    <app-pagination [@openClose] = "hidePagination ? 'close' : 'open'" class="pagination"  [pageSize]="pageSize" [pageSizeOptions]="[3,5,10]" (onPageChange)="handlePaginationChange($event)">
    </app-pagination>

    <div class="container" *ngIf="authInfo?.payload?.role?.toString() == 'STUDENTE' && !hideTable" style="display: flex; justify-content: center; align-items: center; margin: 2rem 0 1rem 0;">
        <button mat-button (click)="iscrizioneSessione()" [disabled]="!(this.rowSelected != null && !hideTable)" style="max-width: 3rem; color: white;">Iscriviti</button>
    </div>

</div>
