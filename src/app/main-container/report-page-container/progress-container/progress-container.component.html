<div class="progress-container">
    <div class="title">Progressi</div>

    <div class="user-form">
        <div class="form-title">Dati studente</div>
        <div class="form" [formGroup] = "userFilter">
            <input [ngClass]="isAuthenticated && authInfo?.payload?.role?.toString() == 'STUDENTE' ? 'disabled' : ''" [readonly]="isAuthenticated && authInfo?.payload?.role?.toString() == 'STUDENTE'" class="search-bar" type="text" placeholder="Nome" formControlName="nome">
            <input [ngClass]="isAuthenticated && authInfo?.payload?.role?.toString() == 'STUDENTE' ? 'disabled' : ''" [readonly]="isAuthenticated && authInfo?.payload?.role?.toString() == 'STUDENTE'" class="search-bar" type="text" placeholder="Cognome" formControlName="cognome">
            <input [ngClass]="isAuthenticated && authInfo?.payload?.role?.toString() == 'STUDENTE' ? 'disabled' : ''" [readonly]="isAuthenticated && authInfo?.payload?.role?.toString() == 'STUDENTE'" class="search-bar" type="text" placeholder="Codice fiscale" formControlName="codiceFiscale">
            <input style="visibility: hidden;" class="search-bar" type="text">
        </div>
    </div>

    <div class="course-form">
        <div class="form-title">Dati corso</div>
        <div class="form" [formGroup] = "courseFilter">
            <mat-form-field class="form-input-field" appearance="outline">
                <mat-label class="form-input-label">Corsi</mat-label>
                <mat-select class="custom-theme" formControlName="nomeCorso">
                    @for (corso of corsi; track corso) {
                    <mat-option class='not-empty-select' [value]="corso.value">{{corso.viewValue}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>
        </div>
    </div>

    <div class="activity-form">
        <div class="form-title">Dati sessione</div>
        <div class="form" [formGroup] = "activityFilter">
            <mat-form-field class="form-input-field" appearance="outline">
                <mat-label class="form-input-label">Data da</mat-label>
                <input [readonly]="true" matInput type="date-local" formControlName="dataDa" [matDatepicker]="pickerDa">
                <mat-datepicker-toggle style="color: #e0aab4;" matIconSuffix [for]="pickerDa"></mat-datepicker-toggle>
                <mat-datepicker #pickerDa></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="form-input-field" appearance="outline">
                <mat-label class="form-input-label">Data a</mat-label>
                <input matInput [readonly]="true" formControlName="dataA"  [matDatepickerFilter]="myFilter" [matDatepicker]="pickerA">
                <mat-datepicker-toggle style="color: #e0aab4;" [disabled]="this.activityFilter.get('dataDa')?.value == null"  matIconSuffix [for]="pickerA"></mat-datepicker-toggle>
                <mat-datepicker #pickerA></mat-datepicker>
            </mat-form-field>
            <div class="checkbox-wrapper">
                <app-checkbox-v2 class="checkbox" [label]="'ORALE'" formControlName="orale"></app-checkbox-v2>
                <app-checkbox-v2 class="checkbox" [label]="'SCRITTO'" formControlName="scritto"></app-checkbox-v2>
            </div>
        </div>
    </div>

    <div class="control-button-container">
        <app-reset-filter-button [onClick]="resetFilter" [label]="'Azzera filtri'" class="reset-button-container"></app-reset-filter-button>
        <app-search-button [onClick]="submitForms" [label]="'Cerca'" class="search-button-container"></app-search-button>
    </div>


    <div class="app-table-v2 table" 
         [@openClose] = "hideTable ? 'close' : 'open'"
         [columnsTemplate]="['nome','1fr','cognome','1fr','codice-fiscale','1fr','tipo','1fr','data','1fr','corso','1fr','esito','1fr']" 
         [modelTableMapper]="progressTableMapper"
         [rowType]="rowType"
         [onEvent]="onSelectedRow"> 
    </div>

    <app-pagination [@openClose] = "hidePagination ? 'close' : 'open'" class="pagination"  [pageSize]="pageSize" [pageSizeOptions]="[3,5,10]" (onPageChange)="handlePaginationChange($event)">
    </app-pagination>

    <!-- <div #opButtons [@openClose] = "hideOperationButton? 'close' : 'open'" id="buttons" class="container">
        <button (click)="getCustomReport()" [ngClass]="rowSelected.length > 0 ? 'enable' : 'disable'" class="report-btn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 28">
                <path d="M0.5 0.285645V27.7142H24.5V13.9999H10.7857V0.285645H0.5ZM14.2143 0.285645V10.5714H24.5L14.2143 0.285645Z"/>
            </svg>
            <p>Report personalizzato</p>
        </button>
        <button (click)="getDailyReport()" [ngClass]="rowSelected.length > 0 ? 'enable' : 'disable'" class="report-btn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 28">
                <path d="M0.5 0.285645V27.7142H24.5V13.9999H10.7857V0.285645H0.5ZM14.2143 0.285645V10.5714H24.5L14.2143 0.285645Z"/>
            </svg>
            <p>Report giornaliero</p>
        </button>
        <button (click)="applicaTutoraggio()" [ngClass]="rowSelected.length > 0 ? 'enable' : 'disable'" class="report-btn applica-tutoraggio">
            <p>Applica tutoraggio</p>
        </button>
    </div> -->
</div>
